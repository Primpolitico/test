<p><link rel="stylesheet" type="text/css" href="//cdn.datatables.net/1.10.16/css/jquery.dataTables.css" /></p>
<script type="text/javascript" charset="utf8" src="//cdn.datatables.net/1.10.16/js/jquery.dataTables.js"></script>
<script type="text/javascript" src="/jw/js/datetimepicker/jquery.simple-dtpicker.js"></script>
<p><link type="text/css" href="/jw/js/datetimepicker/jquery.simple-dtpicker.css" rel="stylesheet" /></p>
<h4 style="margin-top: 10px;">Jadwal Lain</h4>
<table id="dataJadwal" class="display" style="width: 100%;"></table>
<p><br /><br /><br /></p>
<table>
<tbody>
<tr>
<td><label>Revisi Jadwal Mulai</label></td>
<td><input type="text" id="datemulaiRevisi" name="estimasi_mulaiRevisi" value="" size="20" placeholder="click date here.." /></td>
</tr>
<tr>
<td><label>Revisi Jadwal Selesai</label></td>
<td><input type="text" id="dateselesaiRevisi" name="estimasi_selesaiRevisi" value="" size="20" placeholder="click date here.." /></td>
</tr>
<tr>
<td><button type="button" onclick="setJadwalRevisi()"> Revisi</button></td>
</tr>
</tbody>
</table>
<p>
<script type="text/javascript">// <![CDATA[

function setJadwalRevisi(){
	// var revMulai = $("#datemulaiRevisi").val();
	// var revSelesai = $("#dateselesaiRevisi").val();

	// $('#estimasi_mulai',parent.document.body).val(revMulai);
	// $('#estimasi_selesai',parent.document.body).val(revSelesai);
	alert("jalan");

	$(".ui-dialog-titlebar-close").trigger('click');

}

$(document).ready(function() {

var idProcess = $('#id',parent.document.body).val();
var activityID= idProcess;
var estimasiMulai="";
var permitOther=[];
        
var urlApi ='http://192.168.104.191:8098/api/APP_FD_NIMS_DATAGSOT/getOtherPermit';
var datapost={};

datapost.id = activityID ;

function revJadwal(){
  $('#datemulaiRevisi').appendDtpicker(
                     {"autodateOnStart": false});
            	
            	  $('#dateselesaiRevisi').appendDtpicker(
                     {"autodateOnStart": false});

}
$.ajax({
            //type: "POST",
    type: "POST",
    url: urlApi,
    contentType: "application/json",
    dataType: "json",
    data: JSON.stringify(datapost),
    crossOrigin: true,
    success: function (data) {
    revJadwal();
    console.log(data);
    for (var i = 0; i < Object.keys(data).length; i++) {
      var val = [data[i].c_nama_pekerjaan,data[i].c_id_new_workpermit,data[i].c_jenis_pekerjaan,data[i].c_jenis_sub_pekerjaan,data[i].c_area_pekerjaan,data[i].c_area,data[i].c_lokasi_kerja,data[i].c_estimasi_mulai,data[i].c_estimasi_selesai];
          permitOther.push(val);

      }
    console.log(permitOther);       
    $('#dataJadwal').DataTable( {
    data: permitOther,
    columns: [
      { title: "Nama Pekerjaan" },
      { title: "ID New Work Permit"},
      { title: "Jenis Pekerjaan"},
      { title: "Jenis Sub Pekerjaan"},
      { title: "Area Pekerjaan"},
      { title: "Area" },
      { title: "Lokasi"},
      { title: "Estimasi Mulai" },
      { title: "Estimasi Selesai" },
    ]
    } );

    }


    });

});
// ]]></script>
</p>